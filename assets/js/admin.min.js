!function(e){"use strict";e(".rt-tab-nav li").on("click","a",(function(r){r.preventDefault();var t=e(this),i=t.parents(".rt-tab-container"),n=i.children(".rt-tab-nav"),a=i.children(".rt-tab-content"),s=t.attr("href");a.hide(),n.find("li").removeClass("active"),t.parent().addClass("active"),i.find(s).show()})),e(".rt-select2").length&&e.fn.select2&&e(".rt-select2").select2({dropdownAutoWidth:!0}),n(),i(),e("#rtbr_meta").on("change","select, input",(function(){i()})).on("input propertychange",(function(){i()}));var r=e("#rtbr_meta .rt-color");if(r.length&&e.fn.wpColorPicker){var t={defaultColor:!1,change:function(e,r){i()},clear:function(){i()},hide:!0,palettes:!0};r.wpColorPicker(t)}function i(){if(e("#rtbr_meta").length){var r=e("#rtbr_meta").find("input[name],select[name],textarea[name]").serialize(),t=e("#rtbr-preview-container").find(".rt-tpg-container").find(".rt-content-loader");r=r+"&"+e.param({sc_id:e("#post_ID").val()||0}),e(".rt-response").addClass("loading"),function(r,t,i,n){var a;t&&(a="action="+t),i&&(a=i+"&action="+t),i&&!t&&(a=i),a.search(rtbr.nonceID)<0&&(a=a+"&rtbr_nonce="+rtbr.nonce),e.ajax({type:"post",url:rtbr.ajaxurl,data:a,beforeSend:function(){r&&e("<span class='rt-loading'> </span>").insertAfter(r)},success:function(e){r&&r.next(".rt-loading").remove(),n(e)}})}(null,"rtbr_shortcode_layout_preview",r,(function(r){r.error||(e("#rtbr-preview-container").html(r),t.find(".rt-loading-overlay, .rt-loading").remove(),t.removeClass("tpg-pre-loader")),e(".rt-response").removeClass("loading")}))}}function n(){"multiple"===e("#rtbr-business-type").val()?e("#multi_business_holder").show():e("#multi_business_holder").hide();var r=e("#rtbr-sc-layout").val();switch("badge-floating"===r?e("#floating_badge_pos_holder").show():e("#floating_badge_pos_holder").hide(),r){case"grid-one":case"grid-two":case"grid-three":case"grid-four":case"grid-five":case"grid-six":case"grid-seven":case"grid-eight":case"slider-one":case"slider-two":case"isotope-one":e("#grid_column_holder").show();break;default:e("#grid_column_holder").hide()}switch(r){case"badge-one":case"badge-two":case"badge-sidebar":case"rt-badge-floating":e("#badge_bg_holder").show();break;default:e("#badge_bg_holder").hide()}e("#rt-rtbr-pagination").is(":checked")?(e(".rt-field-wrapper.reviews-per-page").show(),e(".rt-field-wrapper.review-display-limit").hide(),console.log("True")):(e(".rt-field-wrapper.reviews-per-page").hide(),e(".rt-field-wrapper.review-display-limit").show()),e("#rtbr-business-info").is(":checked")?e("#business_info_fields_holder").hide():e("#business_info_fields_holder").show()}e(document).on("change","input[type=checkbox]",(function(){n(),e("#rt-tpg-pagination").checked?e(".rt-field-wrapper.posts-per-page").show():e(".rt-field-wrapper.posts-per-page").hide()})),e("#rtbr-business-type, #rtbr-sc-layout").on("change",(function(e){n()})),e((function(){e.fn.select2&&e(".rtbr-select2").select2(),e.fn.wpColorPicker&&e(".rtbr-color").wpColorPicker(),e.fn.rtFieldDependency&&e("[data-rt-depends]").rtFieldDependency(),e(".rtbr-setting-image-wrap").on("click",".rtbr-add-image",(function(r){r.preventDefault();var t,i,n=e(this).parents(".rtbr-setting-image-wrap");void 0===t?((t=wp.media.frames.file_frame=wp.media({frame:"post",state:"insert",multiple:!1})).on("insert",(function(){if(i=t.state().get("selection").first().toJSON(),!(0>e.trim(i.url.length))){var r=void 0===i.sizes.medium?i.url:i.sizes.medium.url;n.find(".rtbr-setting-image-id").val(i.id),n.find(".image-preview-wrapper").html('<img src="'+r+'" alt="'+i.title+'" />')}})),t.open()):t.open()})),e(".rtbr-setting-image-wrap").on("click",".rtbr-remove-image",(function(r){r.preventDefault();var t=e(this).parents(".rtbr-setting-image-wrap");confirm("Are you sure to delete?")&&(t.find(".rtbr-setting-image-id").val(""),t.find(".image-preview-wrapper img").attr("src",t.find(".image-preview-wrapper").data("placeholder")))}))})),e(".rtbr-settings .rtbr-license-wrapper").on("click",".rtbr-licensing-btn",(function(r){r.preventDefault();var t=e(this),i=t.hasClass("license_activate")?"license_activate":"license_deactivate";e.ajax({type:"POST",url:rtbr.ajaxurl,data:{action:"rtbr_manage_licensing",type:i},beforeSend:function(){t.addClass("loading"),t.parents(".description").find(".rt-licence-msg").remove(),e('<span class="rt-icon-spinner animate-spin"></span>').insertAfter(t)},success:function(r){t.next(".rt-icon-spinner").remove(),t.removeClass("loading"),r.error||(t.text(r.value),t.removeClass(i),t.addClass(r.type),"license_deactivate"==r.type?(t.removeClass("button-primary"),t.addClass("danger")):"license_activate"==r.type&&(t.removeClass("danger"),t.addClass("button-primary"))),r.msg&&e("<span class='rt-licence-msg'>"+r.msg+"</span>").insertAfter(t),t.blur()},error:function(e,r){t.removeClass("loading"),t.next(".rt-icon-spinner").remove()}})})),e("#rtbr_tools_settings-license_key").on("keydown",(function(r){e(this).next().remove()}))}(jQuery);